{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["const startBtn = document.querySelector(\"button[data-start]\");\nconst dateInput = document.querySelector(\".input-data\")\nconst clockDays = document.querySelector(\"span[data-days]\");\nconst clockHours = document.querySelector(\"span[data-hours]\");\nconst clockMinutes = document.querySelector(\"span[data-minutes]\");\nconst clockSeconds = document.querySelector(\"span[data-seconds]\");\n\n\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nstartBtn.disabled = true;\nstartBtn.className = \"start-btn\";\nlet userSelectedDate = null;\nconst fp = flatpickr(\"#datetime-picker\", {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n    const now = new Date();\n    userSelectedDate = selectedDates[0];\n    if(userSelectedDate < now) {\n        iziToast.show({\n            id: null, \n            title: 'Error',\n    titleColor: '#fff',\n            message: ' Illegal operation',\n            messageColor: '#fff',\n            messageSize: '16px',\n            backgroundColor: '#ef4040',\n          })\n        startBtn.disabled = true;\n    } else {\n        startBtn.disabled = false;\n        startBtn.className = \"is-active\";\n    }\n  },}); // flatpickr\n\n\n\n\n\n\nstartBtn.addEventListener(\"click\", start)  \n\n\nlet intervalId = null;\n\n\n\nfunction start() {\n   \n        const now = new Date ();\n        let timeDifference = userSelectedDate - now;\n        intervalId = setInterval(() => {\n        timeDifference -= 1000;\n        \nif( timeDifference > 0) {\n        const time = getTimeComponents(timeDifference);\n        onTick(time);\n        startBtn.disabled = true;\n        startBtn.className = \"start-btn\";\n        dateInput.disabled = true;\n                \n}\nelse {\n  stop();\n}\n  }, 1000)\n}\n\n\nfunction getTimeComponents(time) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    // Remaining days\n    const days = Math.floor(time / day);\n    // Remaining hours\n    const hours = pad(Math.floor((time % day) / hour));\n    // Remaining minutes\n    const minutes = pad(Math.floor(((time % day) % hour) / minute));\n    // Remaining seconds\n    const seconds = pad(Math.floor((((time % day) % hour) % minute) / second));\n  \n    return { days, hours, minutes, seconds };\n\n  }\n\nfunction pad(value) {\n    return String(value).padStart(2, \"0\");\n}\n\nfunction onTick({ days, hours, minutes, seconds }) {\n    clockDays.textContent = `${days}`;\n    clockHours.textContent = `${hours}`;\n    clockMinutes.textContent = `${minutes}`;\n    clockSeconds.textContent = `${seconds}`;\n\n}\n\nfunction stop() {\n  clearInterval(intervalId);\n  startBtn.disabled = false;\n  startBtn.className = \"is-active\";\n  const time = getTimeComponents(0);\n  onTick(time);\n  dateInput.disabled = false;\n}"],"names":["startBtn","dateInput","clockDays","clockHours","clockMinutes","clockSeconds","userSelectedDate","flatpickr","selectedDates","now","iziToast","start","intervalId","timeDifference","time","getTimeComponents","onTick","stop","days","hours","pad","minutes","seconds","value"],"mappings":"+IAAA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAY,SAAS,cAAc,iBAAiB,EACpDC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAe,SAAS,cAAc,oBAAoB,EAOhEL,EAAS,SAAW,GACpBA,EAAS,UAAY,YACrB,IAAIM,EAAmB,KACZC,EAAU,mBAAoB,CACrC,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACvB,MAAMC,EAAM,IAAI,KAChBH,EAAmBE,EAAc,CAAC,EAC/BF,EAAmBG,GAClBC,EAAS,KAAK,CACV,GAAI,KACJ,MAAO,QACf,WAAY,OACJ,QAAS,qBACT,aAAc,OACd,YAAa,OACb,gBAAiB,SAC7B,CAAW,EACHV,EAAS,SAAW,KAEpBA,EAAS,SAAW,GACpBA,EAAS,UAAY,YAE7B,EAAK,EAOLA,EAAS,iBAAiB,QAASW,CAAK,EAGxC,IAAIC,EAAa,KAIjB,SAASD,GAAQ,CAGT,IAAIE,EAAiBP,EADT,IAAI,KAEhBM,EAAa,YAAY,IAAM,CAGvC,GAFQC,GAAkB,IAEtBA,EAAiB,EAAG,CAChB,MAAMC,EAAOC,EAAkBF,CAAc,EAC7CG,EAAOF,CAAI,EACXd,EAAS,SAAW,GACpBA,EAAS,UAAY,YACrBC,EAAU,SAAW,EAE7B,MAEEgB,GAEC,EAAE,GAAI,CACT,CAGA,SAASF,EAAkBD,EAAM,CAO7B,MAAMI,EAAO,KAAK,MAAMJ,EAAO,KAAG,EAE5BK,EAAQC,EAAI,KAAK,MAAON,EAAO,MAAO,IAAI,CAAC,EAE3CO,EAAUD,EAAI,KAAK,MAAQN,EAAO,MAAO,KAAQ,GAAM,CAAC,EAExDQ,EAAUF,EAAI,KAAK,MAASN,EAAO,MAAO,KAAQ,IAAU,GAAM,CAAC,EAEzE,MAAO,CAAE,KAAAI,EAAM,MAAAC,EAAO,QAAAE,EAAS,QAAAC,CAAO,CAEvC,CAEH,SAASF,EAAIG,EAAO,CAChB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAEA,SAASP,EAAO,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAE,EAAS,QAAAC,CAAO,EAAI,CAC/CpB,EAAU,YAAc,GAAGgB,CAAI,GAC/Bf,EAAW,YAAc,GAAGgB,CAAK,GACjCf,EAAa,YAAc,GAAGiB,CAAO,GACrChB,EAAa,YAAc,GAAGiB,CAAO,EAEzC,CAEA,SAASL,GAAO,CACd,cAAcL,CAAU,EACxBZ,EAAS,SAAW,GACpBA,EAAS,UAAY,YACrB,MAAMc,EAAOC,EAAkB,CAAC,EAChCC,EAAOF,CAAI,EACXb,EAAU,SAAW,EACvB"}